{
  "intent_id": "INT-050",
  "title": "Video ingest → plumbing proof → baseline real detections (UAT)",
  "status": "closed",
  "created_date": "2026-01-22",
  "runbooks": {
    "decision": "none",
    "paths_mdt": [],
    "notes": "No runbook changes required for this intent."
  },
  "paths_allowed": [
    "spec/",
    "spec/md/docs/",
    "pipeline/",
    "status/audit/"
  ],
  "paths_excluded": [
    "docs/",
    "status/intents/",
    "status/portal/",
    "status/wizard/"
  ],
  "close_gate": [
    "npm run generate",
    "npm run guardrails",
    "npm run audit:intent -- --intent-id INT-050"
  ],
  "summary": [
    "Given a provided local match video, ingest/iterate frames deterministically and export a valid V1 bundle (plumbing proof).",
    "Then add a baseline local ball detector that produces non-empty detections on the UAT clip while remaining trust-first (missing/unknown over wrong).",
    "UAT clip label (preferred): `GoPro_Futsal_part2_trimmed_100mb.mp4` (provided externally via CLI `--video` path; the filename is advisory only and must not be assumed repo-relative)."
  ],
  "non_goals": [
    "Full production-grade vision model training or accuracy targets beyond baseline UAT confidence.",
    "Multi-camera synchronization, sensor fusion, or BEV rendering (separate intents).",
    "Guaranteeing detections on every frame; long missing spans are acceptable and preferred over hallucination."
  ],
  "success_criteria": [
    "A new CLI path can ingest a local single-camera video and export a bundle under `output/<match_id>/` containing at minimum `manifest.json`, `tracks.jsonl`, `events.json`, `report.json`, and required diagnostics placeholders, and `validate` passes.",
    "The runner is deterministic: same inputs/config produce byte-for-byte identical `tracks.jsonl` and `events.json` (ordering + stable keys) using a defined timebase rule for `t_ms`.",
    "Baseline ball detections/tracks are demonstrated on the preferred UAT clip label (`GoPro_Futsal_part2_trimmed_100mb.mp4` provided via CLI `--video` path): at least some frames emit `pos_state=present` ball records with confidence and diagnostics; missing spans are explicit; no fabricated positions/events."
  ],
  "requirements_in_scope": [
    "REQ-V1-VIDEO-INGEST-001",
    "REQ-V1-VIDEO-RUNNER-001",
    "REQ-V1-BALL-DETECT-BASELINE-001",
    "FUSBAL-V1-DATA-001",
    "FUSBAL-V1-BALL-001",
    "FUSBAL-V1-EVENT-001",
    "FUSBAL-V1-TRUST-001",
    "SYS-ARCH-15"
  ],
  "task_ids_planned": [
    "TASK-VIDEO-INGEST-001",
    "TASK-RUN-VIDEO-001",
    "TASK-BALL-DET-BASELINE-001",
    "TASK-BALL-DET-UAT-FIXTURE-SYNTH-001",
    "TASK-EVENTS-DETERMINISTIC-SORT-001",
    "TASK-VALIDATE-STRICT-AND-REPORT-001",
    "TASK-VIDEO-TOOLS-VERSION-DIAGNOSTICS-001",
    "TASK-PORTAL-READMODEL-CACHE-TEST-001",
    "TASK-RUN-VIDEO-STREAM-001",
    "TASK-VIDEO-TOOLS-TIMEOUT-001",
    "TASK-RUN-VIDEO-NULL-ASSERT-001",
    "TASK-DIAGNOSTICS-BALL-DETECTIONS-001",
    "TASK-SHOTS-GOALS-CONFIG-001",
    "TASK-CONTRACT-BALL-FRAMEIDX-001",
    "TASK-VIDEO-TOOLS-NODE-DECOUPLE-001",
    "TASK-BALL-DET-REGRESSION-001",
    "TASK-CLI-EXIT-CODES-001",
    "TASK-PORTAL-AUDIT-RUNS-001"
  ],
  "quality_areas": [
    {
      "area_id": "functional",
      "title": "Functional objectives",
      "task_ids": [
        "TASK-VIDEO-INGEST-001",
        "TASK-RUN-VIDEO-001",
        "TASK-BALL-DET-BASELINE-001",
        "TASK-BALL-DET-UAT-FIXTURE-SYNTH-001",
        "TASK-SHOTS-GOALS-CONFIG-001",
        "TASK-PORTAL-AUDIT-RUNS-001"
      ],
      "objectives": [
        "Video ingest produces deterministic frame_index+t_ms stream.",
        "End-to-end runner exports a valid bundle that passes `validate`.",
        "Baseline detector yields non-empty ball detections on the provided UAT clip.",
        "Portal surfaces latest audit artefacts for the intent."
      ]
    },
    {
      "area_id": "nonfunctional",
      "title": "Non-functional objectives",
      "categories_required": [
        "correctness_safety",
        "performance",
        "security",
        "maintainability"
      ],
      "task_ids": [
        "TASK-EVENTS-DETERMINISTIC-SORT-001",
        "TASK-VALIDATE-STRICT-AND-REPORT-001",
        "TASK-VIDEO-TOOLS-VERSION-DIAGNOSTICS-001",
        "TASK-PORTAL-READMODEL-CACHE-TEST-001",
        "TASK-RUN-VIDEO-STREAM-001",
        "TASK-VIDEO-TOOLS-TIMEOUT-001",
        "TASK-RUN-VIDEO-NULL-ASSERT-001",
        "TASK-DIAGNOSTICS-BALL-DETECTIONS-001",
        "TASK-CONTRACT-BALL-FRAMEIDX-001",
        "TASK-VIDEO-TOOLS-NODE-DECOUPLE-001",
        "TASK-BALL-DET-REGRESSION-001",
        "TASK-CLI-EXIT-CODES-001"
      ],
      "objectives": [
        "Trust-first: do not hallucinate ball/event outputs; explicit missing/unknown behavior is enforced (correctness/safety).",
        "Deterministic outputs suitable for audits (maintainability).",
        "Avoid unbounded resource growth (performance).",
        "Reduce hang risk and improve error diagnostics (correctness/safety)."
      ]
    }
  ],
  "work_packages": [
    {
      "work_package_id": "INT-050-001",
      "title": "Plumbing proof (ingest → export bundle)",
      "items": [
        "TASK-VIDEO-INGEST-001 Deterministic frame decode + timebase extraction for local videos.",
        "TASK-RUN-VIDEO-001 CLI runner: ingest video → run detectors/trackers → export tracks/events bundle."
      ]
    },
    {
      "work_package_id": "INT-050-002",
      "title": "Baseline real detections (UAT)",
      "items": [
        "TASK-BALL-DET-BASELINE-001 Baseline local ball detector producing non-empty detections on the provided clip with confidence/diagnostics.",
        "TASK-BALL-DET-UAT-FIXTURE-SYNTH-001 Add a compact synthetic fixture spec + test to validate baseline present outputs without committing real video."
      ]
    },
    {
      "work_package_id": "INT-050-003",
      "title": "Hardening + portal UX",
      "items": [
        "TASK-EVENTS-DETERMINISTIC-SORT-001 Sort events deterministically before writing events.json.",
        "TASK-VALIDATE-STRICT-AND-REPORT-001 Add validate --strict and emit validation_report.json from run-video.",
        "TASK-VIDEO-TOOLS-VERSION-DIAGNOSTICS-001 Capture and gate ffmpeg/ffprobe versions in diagnostics.",
        "TASK-PORTAL-READMODEL-CACHE-TEST-001 Add a unit test for portal audit-run listing cache behavior.",
        "TASK-RUN-VIDEO-STREAM-001 Stream run-video to reduce memory usage.",
        "TASK-VIDEO-TOOLS-TIMEOUT-001 Add video tooling timeouts and better stderr surfacing.",
        "TASK-RUN-VIDEO-NULL-ASSERT-001 Strengthen tests: detector disabled → zero present.",
        "TASK-DIAGNOSTICS-BALL-DETECTIONS-001 Persist per-frame ball detection diagnostics artifact.",
        "TASK-SHOTS-GOALS-CONFIG-001 Expose shots/goals inference thresholds via CLI flags.",
        "TASK-CONTRACT-BALL-FRAMEIDX-001 Require diagnostics.frame_index for all ball track records.",
        "TASK-VIDEO-TOOLS-NODE-DECOUPLE-001 Remove Node coupling from Python ingest tool resolution.",
        "TASK-BALL-DET-REGRESSION-001 Add a synthetic regression test for baseline detector present frames.",
        "TASK-CLI-EXIT-CODES-001 Add explicit exit codes for common CLI failures.",
        "TASK-PORTAL-AUDIT-RUNS-001 Show latest audit run summaries on the portal intent page."
      ]
    }
  ],
  "closed_date": "2026-01-22"
}
