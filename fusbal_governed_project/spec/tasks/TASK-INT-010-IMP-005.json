{
  "schema_version": 1,
  "task_id": "TASK-INT-010-IMP-005",
  "intent_id": "INT-010",
  "title": "Tighten numeric/range validation for track/event fields",
  "status": "done",
  "scope": [
    "Add explicit numeric/range validation for key contract fields (e.g. confidence bounds, coordinate bounds, timestamp sanity).",
    "Prefer failing with clear errors over silently clamping values.",
    "Do not expand the schema; only validate existing fields more strictly. Do not invent pitch/ENU bounds; only enforce bounds that are universal or explicitly defined by the contract."
  ],
  "acceptance": [
    "`track.confidence` and `track.quality` (when present) must be finite numbers in [0, 1]; violations fail validation with field path + invalid value.",
    "`event.confidence` must be a finite number in [0, 1]; violations fail validation with field path + invalid value.",
    "`track.t_ms` and `event.t_ms` must be integers >= 0; violations fail validation with field path + invalid value.",
    "When `track.frame = wgs84` and `track.pos_state = present`, `track.lat` must be in [-90, 90] and `track.lon` must be in [-180, 180].",
    "When present, `track.sigma_m` must be a finite number >= 0.",
    "Validation errors remain trust-first and actionable (field path + reason)."
  ],
  "deliverables": [
    {
      "deliverable_id": "DELIV-TASK-INT-010-IMP-005-001",
      "title": "Contract-level numeric and range validation helpers",
      "paths": [
        "pipeline/src/fusbal_pipeline/contract.py"
      ],
      "acceptance": [
        "Validation checks include explicit numeric bounds for key fields.",
        "Errors report the offending field path and invalid value."
      ],
      "evidence": [
        "A record with confidence out of range fails validation with a clear message.",
        "A record with an invalid coordinate range fails validation with a clear message."
      ]
    }
  ],
  "subtasks": [
    {
      "subtask_id": "SUB-TASK-INT-010-IMP-005-001",
      "title": "Enumerate and implement explicit numeric bounds checks for core track/event fields.",
      "status": "done",
      "area": "pipeline",
      "provenance_prefix": "FUSBAL.PIPELINE.TASK_INT_010_IMP_005.SUB_001",
      "done_when": [
        "Core numeric fields have explicit validation (bounds/type).",
        "Validation failures include the invalid value and a clear reason."
      ]
    }
  ]
}
