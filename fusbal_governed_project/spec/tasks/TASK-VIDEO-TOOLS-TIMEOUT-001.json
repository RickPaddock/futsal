{
  "schema_version": 1,
  "task_id": "TASK-VIDEO-TOOLS-TIMEOUT-001",
  "intent_id": "INT-050",
  "title": "Video tooling safety: timeouts + better stderr surfacing (ffprobe/ffmpeg)",
  "status": "done",
  "scope": [
    "Add explicit timeouts around ffprobe/ffmpeg interactions to reduce hang risk on corrupted/unsupported files.",
    "Improve failure messages by including useful stderr excerpts without overwhelming output."
  ],
  "acceptance": [
    "ffprobe failures include an actionable error message with an stderr excerpt and the input path.",
    "ffmpeg decode hang risk is reduced with an explicit timeout mechanism and an actionable timeout error.",
    "Timeout behavior is deterministic and does not result in partial/undefined outputs."
  ],
  "deliverables": [
    {
      "deliverable_id": "DELIV-TASK-VIDEO-TOOLS-TIMEOUT-001-001",
      "title": "Timeouts + stderr excerpts for video tooling",
      "paths": [
        "pipeline/src/fusbal_pipeline/video/ingest.py",
        "pipeline/tests/test_video_ingest_v1.py"
      ],
      "acceptance": [
        "Timeouts are implemented without shell execution and are configurable via constants/env when appropriate.",
        "Tests cover at least one negative-path messaging case."
      ],
      "evidence": [
        "Unit tests cover error messaging and timeout behavior (where feasible without external binaries)."
      ]
    }
  ],
  "subtasks": [
    {
      "subtask_id": "SUB-TASK-VIDEO-TOOLS-TIMEOUT-001-001",
      "title": "Add ffprobe timeout + stderr excerpt in error messages.",
      "status": "done",
      "area": "pipeline",
      "provenance_prefix": "FUSBAL.PIPELINE.TASK_VIDEO_TOOLS_TIMEOUT_001.SUB_001",
      "done_when": [
        "ffprobe has a timeout and includes stderr excerpt on failure.",
        "Error messages include the video path context."
      ]
    },
    {
      "subtask_id": "SUB-TASK-VIDEO-TOOLS-TIMEOUT-001-002",
      "title": "Add decode loop timeout for ffmpeg streaming read.",
      "status": "done",
      "area": "pipeline",
      "provenance_prefix": "FUSBAL.PIPELINE.TASK_VIDEO_TOOLS_TIMEOUT_001.SUB_002",
      "done_when": [
        "ffmpeg decode loop fails explicitly after a timeout rather than hanging indefinitely.",
        "Timeout failure is actionable."
      ]
    }
  ]
}
