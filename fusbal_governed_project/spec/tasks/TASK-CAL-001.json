{
  "schema_version": 1,
  "task_id": "TASK-CAL-001",
  "intent_id": "INT-020",
  "title": "Pitch templates + calibration inputs per venue/pitch",
  "status": "done",
  "scope": [
    "Define pitch templates (dimensions/markings model) and calibration input schema per venue/pitch.",
    "Represent calibration inputs as explicit, versioned records (not ad-hoc arguments).",
    "Do not implement auto-fit or manual calibration UI here (handled by subsequent tasks)."
  ],
  "acceptance": [
    "Pitch templates and calibration inputs are explicit and stable (suitable for versioning).",
    "Calibration input records and pitch templates are stored as JSON with `schema_version` and explicit coordinate frame semantics.",
    "Multi-venue/pitch is represented as multiple files under a stable layout (one venue/pitch per file), not as a single giant blob.",
    "Output contract template documents calibration inputs/templates with examples and the expected on-disk layout."
  ],
  "deliverables": [
    {
      "deliverable_id": "DELIV-TASK-CAL-001-001",
      "title": "Pitch template and calibration input schema",
      "paths": [
        "pipeline/src/fusbal_pipeline/calibration/pitch_templates.py",
        "pipeline/src/fusbal_pipeline/calibration/inputs.py",
        "pipeline/fixtures/calibration/venues/example_venue/pitch_a/pitch_template.json",
        "pipeline/fixtures/calibration/venues/example_venue/pitch_a/calibration_input.json",
        "pipeline/src/fusbal_pipeline/contract.py",
        "spec/md/docs/data/OUTPUT_CONTRACT.mdt"
      ],
      "acceptance": [
        "Pitch template schema covers pitch dimensions and relevant markings model.",
        "Calibration input schema supports per-venue/pitch configuration and versioning.",
        "Fixtures demonstrate the chosen file format and are minimal (small, synthetic, deterministic)."
      ],
      "evidence": [
        "A deterministic validation command exists and succeeds on the fixture: `python -m fusbal_pipeline.calibration.inputs --validate pipeline/fixtures/calibration/venues/example_venue/pitch_a/calibration_input.json` (or equivalent documented CLI entrypoint)."
      ]
    },
    {
      "deliverable_id": "DELIV-TASK-CAL-001-002",
      "title": "Output contract template updated for calibration inputs/templates",
      "paths": [
        "spec/md/docs/data/OUTPUT_CONTRACT.mdt"
      ],
      "acceptance": [
        "Contract documents calibration input fields and pitch template semantics."
      ],
      "evidence": [
        "`npm run generate` renders docs reflecting the updated contract template."
      ]
    }
  ],
  "subtasks": [
    {
      "subtask_id": "SUB-TASK-CAL-001-001",
      "title": "Define pitch templates and calibration inputs for a venue/pitch.",
      "status": "done",
      "area": "pipeline",
      "provenance_prefix": "FUSBAL.PIPELINE.TASK_CAL_001.SUB_001",
      "done_when": [
        "Pitch template schema is explicit and versioned.",
        "Calibration input schema is explicit and supports multiple venues/pitches."
      ]
    },
    {
      "subtask_id": "SUB-TASK-CAL-001-002",
      "title": "Update output contract template for calibration inputs/templates.",
      "status": "done",
      "area": "spec",
      "provenance_prefix": "FUSBAL.SPEC.TASK_CAL_001.SUB_002",
      "done_when": [
        "Contract template documents calibration inputs/templates with examples."
      ]
    },
    {
      "subtask_id": "SUB-TASK-CAL-001-003",
      "title": "Add loader/validator for calibration input records.",
      "status": "done",
      "area": "pipeline",
      "provenance_prefix": "FUSBAL.PIPELINE.TASK_CAL_001.SUB_003",
      "done_when": [
        "Calibration input records validate with clear errors for missing/invalid fields (including file path context).",
        "Validation is deterministic and suitable for guardrails/audits."
      ]
    }
  ]
}
