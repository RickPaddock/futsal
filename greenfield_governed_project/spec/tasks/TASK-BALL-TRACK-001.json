{
  "schema_version": 1,
  "task_id": "TASK-BALL-TRACK-001",
  "intent_id": "INT-040",
  "title": "Intermittent ball tracking + missing state",
  "status": "todo",
  "scope": [
    "Fuse per-frame ball detections into a time-ordered ball track with explicit missing spans.",
    "Never hallucinate ball position: prefer missing/unknown over wrong.",
    "Expose quality metrics and diagnostics to support conservative downstream event inference."
  ],
  "acceptance": [
    "Track output represents missing spans explicitly (not implied by gaps).",
    "Track output includes confidence/quality metrics and break/missing reasons.",
    "Output contract template documents the track schema and missing semantics."
  ],
  "deliverables": [
    {
      "deliverable_id": "DELIV-TASK-BALL-TRACK-001-001",
      "title": "Ball tracks with explicit missing/unknown spans and quality metrics",
      "paths": [
        "pipeline/src/fusbal_pipeline/ball/tracker.py",
        "pipeline/src/fusbal_pipeline/ball/track_types.py",
        "pipeline/src/fusbal_pipeline/contract.py",
        "spec/md/docs/data/OUTPUT_CONTRACT.mdt"
      ],
      "acceptance": [
        "Track schema includes explicit missing spans and per-span/per-point confidence.",
        "Diagnostics explain track breaks and missing segments."
      ],
      "evidence": [
        "A minimal pipeline run produces a track with explicit missing spans and quality metrics."
      ]
    },
    {
      "deliverable_id": "DELIV-TASK-BALL-TRACK-001-002",
      "title": "Output contract template updated for ball tracks + missing semantics",
      "paths": [
        "spec/md/docs/data/OUTPUT_CONTRACT.mdt"
      ],
      "acceptance": [
        "Contract documents track fields, missing semantics, and quality metrics."
      ],
      "evidence": [
        "`npm run generate` renders docs reflecting the updated contract template."
      ]
    }
  ],
  "subtasks": [
    {
      "subtask_id": "SUB-TASK-BALL-TRACK-001-001",
      "title": "Implement intermittent ball tracking with explicit missing state.",
      "status": "todo",
      "area": "pipeline",
      "provenance_prefix": "FUSBAL.PIPELINE.TASK_BALL_TRACK_001.SUB_001",
      "done_when": [
        "Tracker emits explicit missing spans (start/end) rather than implicit gaps.",
        "Tracker prefers breaks/missing over identity or trajectory hallucination."
      ]
    },
    {
      "subtask_id": "SUB-TASK-BALL-TRACK-001-002",
      "title": "Update output contract template for ball tracks + missing semantics.",
      "status": "todo",
      "area": "spec",
      "provenance_prefix": "FUSBAL.SPEC.TASK_BALL_TRACK_001.SUB_002",
      "done_when": [
        "Contract template describes track schema, missing spans, and quality metrics with examples."
      ]
    },
    {
      "subtask_id": "SUB-TASK-BALL-TRACK-001-003",
      "title": "Add quality metrics and break diagnostics for downstream consumers.",
      "status": "todo",
      "area": "pipeline",
      "provenance_prefix": "FUSBAL.PIPELINE.TASK_BALL_TRACK_001.SUB_003",
      "done_when": [
        "Track includes confidence/quality fields suitable for conservative event gating.",
        "Diagnostics explain why/when tracks break or segments are marked missing."
      ]
    }
  ]
}
