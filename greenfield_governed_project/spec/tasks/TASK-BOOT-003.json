{
  "schema_version": 1,
  "task_id": "TASK-BOOT-003",
  "intent_id": "INT-001",
  "title": "Evidence run records + minimal internal portal",
  "status": "todo",
  "scope": [
    "Provide a machine-readable evidence capture mechanism for command runs (audit/guardrails/etc.).",
    "Provide an internal portal to browse intents/tasks and run refresh to regenerate surfaces.",
    "Do not build public-facing UX; focus on governed internal transparency."
  ],
  "acceptance": [
    "Evidence recorder writes JSON run records with command, timestamps, and exit status.",
    "Portal lists intents by status and links to intent/task details (including spec files and audit outputs).",
    "Portal refresh triggers regeneration and surfaces updates without manual file hunting."
  ],
  "deliverables": [
    {
      "deliverable_id": "DELIV-TASK-BOOT-003-001",
      "title": "Evidence recorder and a portal view for governance surfaces",
      "paths": [
        "tools/evidence/record_run.mjs",
        "apps/portal/pages/internal/intents/index.js",
        "apps/portal/pages/internal/intents/[intentId].js",
        "apps/portal/pages/internal/tasks/index.js",
        "apps/portal/pages/internal/tasks/[taskId].js",
        "apps/portal/pages/api/internal/refresh.js"
      ],
      "acceptance": [
        "Evidence recorder writes run JSON in a stable schema suitable for audits.",
        "Portal pages render intents/tasks and show audit artifacts after refresh."
      ],
      "evidence": [
        "Running the portal and pressing Refresh updates visible intent/task data."
      ]
    },
    {
      "deliverable_id": "DELIV-TASK-BOOT-003-002",
      "title": "Portal data generation surfaces for internal browsing",
      "paths": [
        "scripts/generate_all.mjs"
      ],
      "acceptance": [
        "Generated portal data is derived from canonical specs and kept in sync by refresh."
      ]
    }
  ],
  "subtasks": [
    {
      "subtask_id": "SUB-TASK-BOOT-003-001",
      "title": "Implement evidence run recorder JSON schema and CLI wrapper.",
      "status": "todo",
      "area": "tools",
      "provenance_prefix": "FUSBAL.TOOLS.TASK_BOOT_003.SUB_001",
      "done_when": [
        "Recorder captures command, cwd, timestamps, exit status, and key outputs.",
        "Output file paths are deterministic and suitable for storing under status/audit/."
      ]
    },
    {
      "subtask_id": "SUB-TASK-BOOT-003-002",
      "title": "Implement internal portal pages for intents and tasks (click-through).",
      "status": "todo",
      "area": "portal",
      "provenance_prefix": "FUSBAL.PORTAL.TASK_BOOT_003.SUB_002",
      "done_when": [
        "Intents list is sorted by status; details show linked tasks and spec file links.",
        "Tasks list/detail show deliverables and subtasks clearly."
      ]
    },
    {
      "subtask_id": "SUB-TASK-BOOT-003-003",
      "title": "Add refresh endpoint to trigger regeneration and guardrails (as configured).",
      "status": "todo",
      "area": "portal",
      "provenance_prefix": "FUSBAL.PORTAL.TASK_BOOT_003.SUB_003",
      "done_when": [
        "Refresh triggers `npm run generate` and updates portal-visible surfaces.",
        "Failures surface actionable error output."
      ]
    }
  ]
}
