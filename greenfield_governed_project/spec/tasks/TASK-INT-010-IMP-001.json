{
  "schema_version": 1,
  "task_id": "TASK-INT-010-IMP-001",
  "intent_id": "INT-010",
  "title": "Stream `tracks.jsonl` validation for large bundles",
  "status": "done",
  "scope": [
    "Validate `tracks.jsonl` without loading the entire file into memory.",
    "Surface actionable errors with line numbers and paths (trust-first).",
    "Do not change the V1 schema; only change validation mechanics and diagnostics."
  ],
  "acceptance": [
    "`fusbal-pipeline validate` can validate very large `tracks.jsonl` files without excessive memory growth.",
    "Validation errors include file path + line number + a concise reason.",
    "Exit codes remain deterministic and suitable for CI/guardrails usage."
  ],
  "deliverables": [
    {
      "deliverable_id": "DELIV-TASK-INT-010-IMP-001-001",
      "title": "Streaming `tracks.jsonl` validation implementation",
      "paths": [
        "pipeline/src/fusbal_pipeline/cli.py",
        "pipeline/src/fusbal_pipeline/contract.py"
      ],
      "acceptance": [
        "Validation reads `tracks.jsonl` incrementally (line-by-line).",
        "A failing line emits an error that includes line number and reason."
      ],
      "evidence": [
        "A synthetic large `tracks.jsonl` can be validated without OOM.",
        "A malformed line produces a line-numbered error."
      ]
    }
  ],
  "subtasks": [
    {
      "subtask_id": "SUB-TASK-INT-010-IMP-001-001",
      "title": "Add a streaming reader/validator for newline-delimited JSON track records.",
      "status": "done",
      "area": "pipeline",
      "provenance_prefix": "FUSBAL.PIPELINE.TASK_INT_010_IMP_001.SUB_001",
      "done_when": [
        "Validation iterates `tracks.jsonl` line-by-line rather than reading the whole file.",
        "Errors include both line number and a concise parse/validation reason."
      ]
    },
    {
      "subtask_id": "SUB-TASK-INT-010-IMP-001-002",
      "title": "Wire streaming validation into `fusbal-pipeline validate` with stable exit codes.",
      "status": "done",
      "area": "pipeline",
      "provenance_prefix": "FUSBAL.PIPELINE.TASK_INT_010_IMP_001.SUB_002",
      "done_when": [
        "`validate` uses streaming validation for `tracks.jsonl` in all code paths.",
        "Exit codes and error formatting remain deterministic."
      ]
    }
  ]
}
