{
  "schema_version": 1,
  "task_id": "TASK-PLAYER-DET-001",
  "intent_id": "INT-030",
  "title": "Player detector(s) per frame + confidence",
  "status": "done",
  "scope": [
    "Produce per-frame player detections with confidence and stable record fields.",
    "Prefer missing/unknown over wrong: low-confidence detections are suppressed or explicitly flagged.",
    "Do not attempt identity continuity here (handled by MOT task)."
  ],
  "acceptance": [
    "Detections output includes at minimum frame/time, bbox/position, confidence, and diagnostic flags.",
    "Detection record includes a stable minimal field set: frame_index (or timestamp), bbox_xyxy_px (pixels), confidence (0..1), and diagnostics (object with stable keys).",
    "Detection output is deterministic for the same input (ordering + ids where applicable).",
    "Negative path: frames with no visible players produce an empty detection set (not fabricated detections) and diagnostics explain any gating decisions.",
    "All edited code units include requirement provenance tags as applicable (e.g., FUSBAL-V1-PLAYER-001 and/or FUSBAL-V1-TRUST-001), consistent with repo guardrails.",
    "Output contract template documents detection schema and missing/unknown semantics, including required fields and example records."
  ],
  "deliverables": [
    {
      "deliverable_id": "DELIV-TASK-PLAYER-DET-001-001",
      "title": "Per-frame player detections with confidence",
      "paths": [
        "pipeline/src/fusbal_pipeline/player/detections.py",
        "pipeline/src/fusbal_pipeline/player/detector.py",
        "pipeline/src/fusbal_pipeline/contract.py",
        "spec/md/docs/data/OUTPUT_CONTRACT.mdt"
      ],
      "acceptance": [
        "Each frame emits 0..N player detections with bbox and confidence.",
        "Low-confidence detections are gated or flagged (trust-first)."
      ],
      "evidence": [
        "A minimal pipeline run produces player detections with confidence and diagnostics."
      ]
    },
    {
      "deliverable_id": "DELIV-TASK-PLAYER-DET-001-002",
      "title": "Output contract template updated for player detections",
      "paths": [
        "spec/md/docs/data/OUTPUT_CONTRACT.mdt"
      ],
      "acceptance": [
        "Contract documents detection schema and missing/unknown semantics."
      ],
      "evidence": [
        "`npm run generate` renders docs reflecting the updated contract template."
      ]
    }
  ],
  "subtasks": [
    {
      "subtask_id": "SUB-TASK-PLAYER-DET-001-001",
      "title": "Implement player detection output per frame (detections + confidence).",
      "status": "done",
      "area": "pipeline",
      "provenance_prefix": "FUSBAL.PIPELINE.TASK_PLAYER_DET_001.SUB_001",
      "done_when": [
        "Detection record fields are explicit (frame/time, bbox/pos, confidence, flags).",
        "Output ordering is deterministic."
      ]
    },
    {
      "subtask_id": "SUB-TASK-PLAYER-DET-001-002",
      "title": "Update output contract template for player detections.",
      "status": "done",
      "area": "spec",
      "provenance_prefix": "FUSBAL.SPEC.TASK_PLAYER_DET_001.SUB_002",
      "done_when": [
        "Contract template includes schema and minimal examples."
      ]
    },
    {
      "subtask_id": "SUB-TASK-PLAYER-DET-001-003",
      "title": "Add conservative gating + diagnostics for low-confidence detections.",
      "status": "done",
      "area": "pipeline",
      "provenance_prefix": "FUSBAL.PIPELINE.TASK_PLAYER_DET_001.SUB_003",
      "done_when": [
        "Low-confidence detections are suppressed or explicitly flagged (trust-first).",
        "Diagnostics explain gating decisions."
      ]
    }
  ]
}
