{
  "schema_version": 1,
  "task_id": "TASK-V1-OUT-001",
  "intent_id": "INT-010",
  "title": "Match bundle layout + required artifacts",
  "status": "todo",
  "scope": [
    "Define the on-disk match bundle layout and required artifacts for V1 outputs.",
    "Ensure manifests are deterministic (stable ordering + stable ids) for reproducible audits and diffs.",
    "Do not implement the full vision pipeline here; focus on output bundle contracts and validation."
  ],
  "acceptance": [
    "Bundle layout is explicit and validated by code (init/validate paths).",
    "Manifests are deterministic for identical inputs and include enough metadata for downstream tooling.",
    "Output contract template documents bundle layout and required artifacts."
  ],
  "deliverables": [
    {
      "deliverable_id": "DELIV-TASK-V1-OUT-001-001",
      "title": "Bundle directory layout, required artifacts, and deterministic manifests",
      "paths": [
        "pipeline/src/fusbal_pipeline/bundle.py",
        "pipeline/src/fusbal_pipeline/contract.py",
        "spec/md/docs/data/OUTPUT_CONTRACT.mdt"
      ],
      "acceptance": [
        "Bundle layout and required artifacts are encoded and validated in code.",
        "Manifest generation is deterministic and includes required metadata."
      ],
      "evidence": [
        "CLI init/validate demonstrates deterministic manifest output."
      ]
    },
    {
      "deliverable_id": "DELIV-TASK-V1-OUT-001-002",
      "title": "Output contract template updated for bundle layout + required artifacts",
      "paths": [
        "spec/md/docs/data/OUTPUT_CONTRACT.mdt"
      ],
      "acceptance": [
        "Contract documents bundle layout, required artifacts, and manifest semantics."
      ],
      "evidence": [
        "`npm run generate` renders docs reflecting the updated contract template."
      ]
    }
  ],
  "subtasks": [
    {
      "subtask_id": "SUB-TASK-V1-OUT-001-001",
      "title": "Define match bundle layout and required artifacts in pipeline bundle code.",
      "status": "todo",
      "area": "pipeline",
      "provenance_prefix": "FUSBAL.PIPELINE.TASK_V1_OUT_001.SUB_001",
      "done_when": [
        "Bundle layout and required artifacts are defined as explicit constants/types.",
        "Validation fails with clear errors when required artifacts are missing."
      ]
    },
    {
      "subtask_id": "SUB-TASK-V1-OUT-001-002",
      "title": "Update output contract template to match bundle layout + required artifacts.",
      "status": "todo",
      "area": "spec",
      "provenance_prefix": "FUSBAL.SPEC.TASK_V1_OUT_001.SUB_002",
      "done_when": [
        "Contract template documents bundle layout and required artifacts with examples."
      ]
    },
    {
      "subtask_id": "SUB-TASK-V1-OUT-001-003",
      "title": "Implement deterministic manifest semantics (stable ordering + ids).",
      "status": "todo",
      "area": "pipeline",
      "provenance_prefix": "FUSBAL.PIPELINE.TASK_V1_OUT_001.SUB_003",
      "done_when": [
        "Manifests are deterministic across runs for identical inputs.",
        "Manifest fields are explicit and versioned."
      ]
    }
  ]
}
