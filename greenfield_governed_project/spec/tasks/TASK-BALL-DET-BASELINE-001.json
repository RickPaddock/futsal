{
  "schema_version": 1,
  "task_id": "TASK-BALL-DET-BASELINE-001",
  "intent_id": "INT-050",
  "title": "Baseline local ball detector (real detections for UAT clip)",
  "status": "todo",
  "scope": [
    "Implement a baseline local ball detector that operates on decoded video frames and produces non-empty ball detections on the provided UAT clip.",
    "Detector must be conservative: allow missing spans and prefer no detection over wrong detection.",
    "Integrate the detector with ball tracking and evidence-pointer events so UAT can inspect outputs."
  ],
  "acceptance": [
    "Detector outputs per-frame ball candidates with `confidence` in [0,1] and stable diagnostics keys.",
    "On the provided UAT clip, the exported bundle contains at least some `entity_type=ball` track records with `pos_state=present` and explicit missing elsewhere.",
    "No hallucination: the pipeline MUST NOT emit `pos_state=present` without the detector producing a gated detection for that frame.",
    "A config flag allows disabling the detector; with it disabled the bundle remains valid and trust-first."
  ],
  "deliverables": [
    {
      "deliverable_id": "DELIV-TASK-BALL-DET-BASELINE-001-001",
      "title": "Baseline ball detector integrated with run-video path",
      "paths": [
        "pipeline/src/fusbal_pipeline/ball/detector.py",
        "pipeline/src/fusbal_pipeline/ball/detections.py",
        "pipeline/src/fusbal_pipeline/video/ingest.py",
        "pipeline/src/fusbal_pipeline/cli.py"
      ],
      "acceptance": [
        "Detector produces `RawBallDetection` candidates and can be used by the run-video runner.",
        "Diagnostics include reasons when detections are suppressed."
      ],
      "evidence": [
        "A recorded UAT run (status/audit/INT-050/...) demonstrates non-empty ball detections on a provided video (the video itself is not checked in)."
      ]
    }
  ],
  "subtasks": [
    {
      "subtask_id": "SUB-TASK-BALL-DET-BASELINE-001-001",
      "title": "Implement baseline detector and conservative gating.",
      "status": "todo",
      "area": "pipeline",
      "provenance_prefix": "FUSBAL.PIPELINE.TASK_BALL_DET_BASELINE_001.SUB_001",
      "done_when": [
        "Detector emits candidates with confidence and stable diagnostics.",
        "Conservative gating is applied before marking a frame as present."
      ]
    },
    {
      "subtask_id": "SUB-TASK-BALL-DET-BASELINE-001-002",
      "title": "Integrate detector into run-video and export contract-valid tracks/events.",
      "status": "todo",
      "area": "pipeline",
      "provenance_prefix": "FUSBAL.PIPELINE.TASK_BALL_DET_BASELINE_001.SUB_002",
      "done_when": [
        "UAT clip produces some present ball track points; missing elsewhere is explicit.",
        "Events include evidence pointers."
      ]
    },
    {
      "subtask_id": "SUB-TASK-BALL-DET-BASELINE-001-003",
      "title": "Add tests for trust-first behavior (no hallucination) with synthetic frames.",
      "status": "todo",
      "area": "pipeline",
      "provenance_prefix": "FUSBAL.PIPELINE.TASK_BALL_DET_BASELINE_001.SUB_003",
      "done_when": [
        "Tests cover that absent/low-confidence detections do not result in pos_state=present."
      ]
    }
  ]
}

